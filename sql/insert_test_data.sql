-- 抢票系统测试数据插入脚本
-- 在执行此脚本前，请先执行 init_database.sql

USE ticket_system;

-- ========================================
-- 插入测试用户数据
-- ========================================

-- 插入测试用户（密码为123456的MD5值）
INSERT INTO t_user (username, password, nickname, phone, email, gender, status) VALUES
('admin', 'e10adc3949ba59abbe56e057f20f883e', '系统管理员', '13800138000', 'admin@example.com', 1, 1),
('testuser1', 'e10adc3949ba59abbe56e057f20f883e', '测试用户1', '13800138001', 'user1@example.com', 1, 1),
('testuser2', 'e10adc3949ba59abbe56e057f20f883e', '测试用户2', '13800138002', 'user2@example.com', 2, 1),
('testuser3', 'e10adc3949ba59abbe56e057f20f883e', '测试用户3', '13800138003', 'user3@example.com', 1, 1);

-- 分配用户角色
INSERT INTO t_user_role (user_id, role_id) VALUES
(1, 1), -- admin为管理员
(2, 2), -- testuser1为普通用户
(3, 2), -- testuser2为普通用户
(4, 2); -- testuser3为普通用户

-- ========================================
-- 插入场馆数据
-- ========================================

INSERT INTO t_venue (name, province, city, district, address, description, contact_phone, traffic_info) VALUES
('北京国家体育馆', '北京市', '北京市', '朝阳区', '奥林匹克公园15号', '2008年奥运会主场馆，可容纳8万人', '010-12345678', '地铁8号线奥体中心站'),
('上海大剧院', '上海市', '上海市', '黄浦区', '人民大道300号', '上海标志性文化建筑', '021-12345678', '地铁1、2、8号线人民广场站'),
('广州体育馆', '广东省', '广州市', '天河区', '天河路299号', '广州市大型综合体育场馆', '020-12345678', '地铁1号线体育中心站'),
('深圳音乐厅', '广东省', '深圳市', '福田区', '福中一路2016号', '深圳市标志性音乐场所', '0755-12345678', '地铁2、3号线福田站');

-- ========================================
-- 插入座位区域数据
-- ========================================

-- 北京国家体育馆座位区域
INSERT INTO t_seat_area (venue_id, name, price, capacity) VALUES
(1, 'VIP区', 1280.00, 500),
(1, '一等座', 880.00, 2000),
(1, '二等座', 580.00, 5000),
(1, '三等座', 280.00, 10000);

-- 上海大剧院座位区域
INSERT INTO t_seat_area (venue_id, name, price, capacity) VALUES
(2, '池座', 680.00, 800),
(2, '一楼包厢', 980.00, 200),
(2, '二楼', 480.00, 600),
(2, '三楼', 280.00, 400);

-- 广州体育馆座位区域
INSERT INTO t_seat_area (venue_id, name, price, capacity) VALUES
(3, 'VIP区', 888.00, 300),
(3, '内场', 588.00, 1500),
(3, '看台A区', 388.00, 3000),
(3, '看台B区', 188.00, 5000);

-- 深圳音乐厅座位区域
INSERT INTO t_seat_area (venue_id, name, price, capacity) VALUES
(4, '一楼正厅', 580.00, 600),
(4, '一楼包厢', 780.00, 100),
(4, '二楼正厅', 380.00, 400),
(4, '二楼包厢', 580.00, 80);

-- ========================================
-- 插入演出数据
-- ========================================

INSERT INTO t_show (title, category_id, description, cover_img, duration, notice, status) VALUES
('2024新年音乐会', 1, '维也纳爱乐乐团2024新年音乐会，经典曲目演奏', '/images/show1.jpg', 120, '请提前30分钟入场，演出期间请勿拍照', 1),
('《雷雨》话剧', 2, '曹禺经典话剧作品，著名演员主演', '/images/show2.jpg', 150, '迟到观众请在幕间休息时入场', 1),
('天鹅湖芭蕾舞', 3, '俄罗斯国家芭蕾舞团经典演出', '/images/show3.jpg', 140, '建议着正装观看，1.2米以下儿童谢绝入场', 1),
('NBA中国赛', 4, '洛杉矶湖人队 VS 金州勇士队', '/images/show4.jpg', 180, '比赛时间可能因故调整，请关注官方通知', 1),
('毕加索画展', 5, '毕加索作品回顾展，珍贵原作展出', '/images/show5.jpg', 0, '展览期间请勿触摸展品，禁止闪光灯拍照', 1);

-- ========================================
-- 插入演出场次数据
-- ========================================

INSERT INTO t_show_session (show_id, venue_id, session_time, status) VALUES
-- 新年音乐会场次
(1, 2, '2024-12-31 19:30:00', 2),
(1, 2, '2025-01-01 15:00:00', 2),
-- 雷雨话剧场次
(2, 2, '2024-12-20 19:30:00', 2),
(2, 2, '2024-12-21 19:30:00', 2),
(2, 2, '2024-12-22 14:30:00', 2),
-- 天鹅湖芭蕾舞场次
(3, 2, '2024-12-25 19:30:00', 2),
(3, 4, '2024-12-26 19:30:00', 2),
-- NBA中国赛场次
(4, 1, '2024-12-28 19:30:00', 2),
-- 毕加索画展（展览类，时间跨度较长）
(5, 2, '2024-12-01 09:00:00', 2);

-- ========================================
-- 插入票种数据
-- ========================================

-- 新年音乐会票种（12月31日场次）
INSERT INTO t_ticket_type (show_id, session_id, area_id, name, price, stock, remaining, limit_per_user) VALUES
(1, 1, 5, '池座', 680.00, 800, 800, 4),
(1, 1, 6, '一楼包厢', 980.00, 200, 200, 2),
(1, 1, 7, '二楼', 480.00, 600, 600, 4),
(1, 1, 8, '三楼', 280.00, 400, 400, 6);

-- 新年音乐会票种（1月1日场次）
INSERT INTO t_ticket_type (show_id, session_id, area_id, name, price, stock, remaining, limit_per_user) VALUES
(1, 2, 5, '池座', 680.00, 800, 800, 4),
(1, 2, 6, '一楼包厢', 980.00, 200, 200, 2),
(1, 2, 7, '二楼', 480.00, 600, 600, 4),
(1, 2, 8, '三楼', 280.00, 400, 400, 6);

-- 雷雨话剧票种（12月20日场次）
INSERT INTO t_ticket_type (show_id, session_id, area_id, name, price, stock, remaining, limit_per_user) VALUES
(2, 3, 5, '池座', 380.00, 800, 800, 4),
(2, 3, 6, '一楼包厢', 580.00, 200, 200, 2),
(2, 3, 7, '二楼', 280.00, 600, 600, 4),
(2, 3, 8, '三楼', 180.00, 400, 400, 6);

-- NBA中国赛票种
INSERT INTO t_ticket_type (show_id, session_id, area_id, name, price, stock, remaining, limit_per_user) VALUES
(4, 8, 1, 'VIP区', 1280.00, 500, 500, 2),
(4, 8, 2, '一等座', 880.00, 2000, 2000, 4),
(4, 8, 3, '二等座', 580.00, 5000, 5000, 6),
(4, 8, 4, '三等座', 280.00, 10000, 10000, 8);

-- ========================================
-- 插入票务库存数据
-- ========================================

-- 为每个票种创建对应的库存记录
INSERT INTO t_ticket_stock (ticket_type_id, total_stock, locked_stock, sold_stock, version)
SELECT id, stock, 0, 0, 0 FROM t_ticket_type;

-- ========================================
-- 插入一些示例座位数据
-- ========================================

-- 为上海大剧院池座区域插入部分座位
INSERT INTO t_seat (area_id, row_num, seat_num, status) VALUES
-- A排座位
(5, 'A', '1', 1), (5, 'A', '2', 1), (5, 'A', '3', 1), (5, 'A', '4', 1), (5, 'A', '5', 1),
(5, 'A', '6', 1), (5, 'A', '7', 1), (5, 'A', '8', 1), (5, 'A', '9', 1), (5, 'A', '10', 1),
-- B排座位
(5, 'B', '1', 1), (5, 'B', '2', 1), (5, 'B', '3', 1), (5, 'B', '4', 1), (5, 'B', '5', 1),
(5, 'B', '6', 1), (5, 'B', '7', 1), (5, 'B', '8', 1), (5, 'B', '9', 1), (5, 'B', '10', 1),
-- C排座位
(5, 'C', '1', 1), (5, 'C', '2', 1), (5, 'C', '3', 1), (5, 'C', '4', 1), (5, 'C', '5', 1),
(5, 'C', '6', 1), (5, 'C', '7', 1), (5, 'C', '8', 1), (5, 'C', '9', 1), (5, 'C', '10', 1);

COMMIT;

-- 测试数据插入完成
SELECT '测试数据插入完成！' AS message;
SELECT '用户账号: admin/testuser1/testuser2/testuser3，密码均为: 123456' AS login_info;